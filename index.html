<!DOCTYPE html>
<html>
<head>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito+Sans:opsz,wght@6..12,400;6..12,700&display=swap');
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 80vh;
            margin: 0;
            font-family: 'Nunito Sans', sans-serif;
        }
        canvas{
            cursor: ew-resize;
        }
        h1{
            font-size: 40px;
            text-transform: uppercase;
            color: yellowgreen;
            font-weight: bold;
        }
        #canvas-container {
            background-image: url('assets/ShonkyGameBackgound.png'); /* Replace with the path to your background image */
            background-size: cover;
            position: relative;
        }
    </style>
</head>
<body>
    <h1>Shokys game</h1>
    <img id="lemonImg" src="assets/Lemon.png" style="display: none;">
    <img id="basketImg" src="assets/basket.png" style="display: none;">
    <div id="canvas-container">
        <canvas id="gameCanvas" width="500" height="500"></canvas>
    </div>
   

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");

        // Fruit properties
        const fruitSize = 30;
        const fruits = [];
        let score = 0;
        let lemonsDropped = 0;
        const maxLemons = 30;
        let lemonsToDrop = 2; // Number of lemons to drop each time
        let lemonsDidnotCaught = 0;
        let remainingLemons = maxLemons;

        // Basket properties
        const basketWidth = 60;
        const basketHeight = 40;
        let basketX = (canvas.width - basketWidth) / 2;

        // Event listener for basket movement
        document.addEventListener("keydown", moveBasket);
        document.addEventListener("mousemove", moveBasketWithMouse);
        canvas.addEventListener("mouseover", () => (isMouseOverCanvas = true));
        canvas.addEventListener("mouseout", () => (isMouseOverCanvas = false));

        // Load the lemon image
        const lemonImg = document.getElementById("lemonImg");

        // Load the basket image
        const basketImg = document.getElementById("basketImg");

        // Create random fruits
        function createFruits(count) {
            for (let i = 0; i < count; i++) {
                const fruit = {
                    x: Math.random() * (canvas.width - fruitSize),
                    y: 0,
                    speed: Math.random() * 2 + 2,
                };
                fruits.push(fruit);
            }
        }

        // Move the basket
        function moveBasket(event) {
            if (event.key === "ArrowLeft" && basketX > 0) {
                basketX -= 10;
            } else if (event.key === "ArrowRight" && basketX + basketWidth < canvas.width) {
                basketX += 10;
            }
        }

        // Move basket with Mouse
        function moveBasketWithMouse(event) {
            const mouseX = event.clientX - canvas.getBoundingClientRect().left;
            if (mouseX >= 0 && mouseX <= canvas.width) {
                //basketX = mouseX - basketWidth / 2;
                basketX = Math.min(Math.max(mouseX - basketWidth / 2, 0), canvas.width - basketWidth);
            }
        }

        // Draw the game
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw fruits using the lemon image
            for (let i = 0; i < fruits.length; i++) {
                const fruit = fruits[i];
                ctx.drawImage(lemonImg, fruit.x, fruit.y, fruitSize, fruitSize);
                fruit.y += fruit.speed;

                // Check if the fruit is caught
                if (
                    fruit.y + fruitSize > canvas.height - basketHeight &&
                    fruit.x + fruitSize > basketX &&
                    fruit.x < basketX + basketWidth
                ) {
                    fruits.splice(i, 1);
                    score++;
                    lemonsDropped++;
                    remainingLemons--;
                    createFruits(1); // Drop 2 lemons at a time
                        
                    
                }

                // Remove fruits that go off the screen
                if (fruit.y > canvas.height) {
                    fruits.splice(i, 1);
                    lemonsDropped++;
                    remainingLemons--;
                    createFruits(1);
                }
            }

            // Draw the basket
            ctx.drawImage(basketImg, basketX, canvas.height - basketHeight-27, basketWidth, basketHeight);

            // Display the score
            ctx.fillStyle = "black";
            ctx.font = "20px Arial";
            ctx.fillText('ðŸ‹' + score + '/' + maxLemons, 10, 30);
            ctx.fillText('ðŸ‹' + remainingLemons, 440, 30);

            // Check if the game should end
            if (lemonsDropped >= maxLemons) {
                ctx.fillStyle = "red";
                ctx.font = "30px Nunito Sans";
                ctx.fillText("Game Over", canvas.width / 2 - 80, canvas.height / 2);
            } else {
                requestAnimationFrame(draw);
            }
        }

        // Start the game
        createFruits(6); // Initialize with a fruit
        draw();
    </script>
</body>
</html>
